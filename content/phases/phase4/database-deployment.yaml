id: phase4-topic5
slug: database-deployment
name: Database Deployment & Configuration
description: Learn to deploy and configure PostgreSQL databases in the cloud. This topic covers the fundamentals of relational database deployment, including architecture, installation, and secure remote access configuration. It builds on Phase 3 database fundamentals and focuses on cloud-specific deployment and network hardening.
order: 5
learning_objectives:
- id: database-deployment-postgres-basics
  text: Understand PostgreSQL deployment fundamentals in cloud environments.
  order: 1
- id: database-deployment-secure-access
  text: Configure database access controls for private, least-exposed connectivity.
  order: 2
- id: database-deployment-operational-validation
  text: Validate secure application-to-database connectivity in a realistic deployment pattern.
  order: 3
learning_steps:
- order: 1
  action: 'Read:'
  description: Review your provider's PostgreSQL options (managed services vs self-hosted on VMs) and choose the model you'll use for this topic.
  options:
  - provider: azure
    title: Azure PostgreSQL Deployment Options Overview
    url: https://learn.microsoft.com/en-us/azure/postgresql/configure-maintain/overview-postgres-choose-server-options
    description: Review PostgreSQL offerings on Azure and decide between managed and VM-hosted patterns.
  - provider: aws
    title: AWS PostgreSQL Deployment Options Overview
    url: https://aws.amazon.com/rds/postgresql/
    description: Compare PostgreSQL options on AWS including managed and self-managed approaches.
  - provider: gcp
    title: Google Cloud PostgreSQL Deployment Options Overview
    url: https://docs.cloud.google.com/sql/docs/postgres/introduction
    description: Understand PostgreSQL options on Google Cloud and choose the right deployment path.
  title: Compare PostgreSQL deployment options by provider
  id: phase4-topic5-read-compare-postgresql-deployment-options
- order: 2
  action: 'Read:'
  description: Before deploying PostgreSQL in the cloud, learn how to install it on a Linux VM. This covers adding the official PostgreSQL repository, installing the server package, starting the service, and performing initial setup like creating a database and setting a password.
  options:
  - provider: azure
    title: Install PostgreSQL on an Azure Linux VM
    url: https://learn.microsoft.com/en-us/previous-versions/azure/virtual-machines/linux/postgresql-install
    description: Step-by-step guide to installing and configuring PostgreSQL on a Linux VM in Azure.
  - provider: aws
    title: PostgreSQL Linux Downloads (Official)
    url: https://www.postgresql.org/download/linux/
    description: Official PostgreSQL installation instructions for Ubuntu, Debian, RHEL, and other Linux distributions.
  - provider: gcp
    title: PostgreSQL Linux Downloads (Official)
    url: https://www.postgresql.org/download/linux/
    description: Official PostgreSQL installation instructions for Ubuntu, Debian, RHEL, and other Linux distributions.
  title: Learn how to install PostgreSQL on Linux
  id: phase4-topic5-read-install-postgresql-on-linux
- order: 3
  action: 'Practice:'
  description: Deploy a VM in a private subnet on your cloud provider and install PostgreSQL. Use provider networking guidance plus the PostgreSQL Linux packages docs to complete the setup.
  options:
  - provider: azure
    title: Azure Network Security Tutorial (subnet + NSG)
    url: https://learn.microsoft.com/en-us/azure/virtual-network/tutorial-filter-network-traffic
    description: Build a VNet/subnet-secured VM pattern you can adapt for a private PostgreSQL host.
  - provider: aws
    title: Amazon VPC with Public and Private Subnets
    url: https://docs.aws.amazon.com/vpc/latest/userguide/vpc-example-private-subnets-nat.html
    description: Follow the AWS reference architecture for private-subnet workloads before installing PostgreSQL.
  - provider: gcp
    title: Create an Instance in a Specific Subnet
    url: https://docs.cloud.google.com/compute/docs/instances/create-vm-specific-subnet
    description: Launch a VM in your chosen subnet and use no external IP for private-only database hosting.
  title: Deploy a VM in a private subnet and install PostgreSQL
  id: phase4-topic5-practice-deploy-a-vm-in
- order: 4
  action: 'Practice:'
  description: "Even though your database VM sits in a private subnet, network controls alone aren't enough. A misconfigured NSG/security-group rule, a compromised peer workload, or a future subnet expansion could expose the database to unintended clients. pg_hba.conf is PostgreSQL's own host-based authentication layer. Edit pg_hba.conf to allow connections only from your API server's IP range and require strong authentication. Then create database users with least-privilege permissions for your application."
  url: https://www.postgresql.org/docs/current/auth-pg-hba-conf.html
  title: Configure pg_hba.conf for secure remote access
  id: phase4-topic5-practice-configure-pghbaconf-for-secure
- order: 5
  action: 'Practice:'
  description: "Your database VM has no public IP, so you can't SSH in directly — you need a way to reach it securely. Use your provider's approach to connect to the database VM, then run psql to verify PostgreSQL is running and your pg_hba.conf rules work. Next, launch a second VM in a different subnet (simulating an application server), connect to it the same way, and test that it can reach the database with psql over the private network. Finally, confirm the database is NOT reachable from the public internet — try connecting from your local machine directly and verify it times out or is refused."
  options:
  - provider: azure
    title: Connect to a Private VM via Azure Bastion
    url: https://learn.microsoft.com/en-us/azure/bastion/bastion-connect-vm-ssh-linux
    description: A managed PaaS bastion host — provides browser-based SSH/RDP through the Azure portal. No agent needed on the VM.
  - provider: aws
    title: Connect to a Private Instance via Session Manager
    url: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/connect-with-systems-manager-session-manager.html
    description: Agent-based access through the AWS control plane — requires the SSM agent on the instance. No bastion host, no open inbound ports. Also supports port forwarding and session logging.
  - provider: gcp
    title: Connect to a Private VM via IAP TCP Forwarding
    url: https://docs.cloud.google.com/iap/docs/using-tcp-forwarding
    description: An identity-aware tunnel proxy — creates an encrypted tunnel from your machine authenticated via IAM, then you use your own SSH client through it. No agent required.
  title: Verify database connectivity and security
  id: phase4-topic5-practice-verify-database-connectivity-and
- order: 6
  action: 'Practice:'
  title: Clean up your cloud resources
  description: Delete all resources you created — VMs, PostgreSQL installations, Bastion/SSM/IAP configurations, VPC/VNet, subnets, and security groups. Check your cloud console to confirm nothing is still running. Leaving resources active will incur charges.
  id: phase4-topic5-practice-clean-up-your-cloud
