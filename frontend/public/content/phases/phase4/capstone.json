{
  "id": "phase4-topic9",
  "slug": "capstone",
  "name": "Cloud Deployment Capstone",
  "description": "Deploy your Journal API from the Phase 2 Capstone to a secure 2-tier cloud architecture. This capstone challenges you to research, design, and implement a production-ready environment with proper networking and security.",
  "short_description": "Deploy your Journal API to a secure 2-tier cloud architecture with VMs, networking, and managed database.",
  "order": 9,
  "is_capstone": true,
  "learning_steps": [
    {
      "order": 1,
      "text": "Challenge Overview",
      "action": "Challenge Overview:",
      "url": null,
      "description": "Create a secure 2-tier architecture:\n\n• Tier 1: FastAPI application server (internet-accessible)\n• Tier 2: PostgreSQL database server (private, secure)"
    },
    {
      "order": 2,
      "text": "Learning Objectives",
      "action": "Learning Objectives:",
      "url": null,
      "description": "• Design secure cloud networking with public/private subnets\n• Implement security groups following least privilege principles\n• Configure remote database access securely\n• Deploy a production-ready multi-tier application"
    },
    {
      "order": 3,
      "text": "Prerequisites",
      "action": "Prerequisites:",
      "url": null,
      "description": "Before starting, ensure you have:\n\n• Completed Phase 2 Capstone (Journal API with AI analysis working locally)\n• Cloud provider account with appropriate permissions\n• SSH key pair for server access\n• LLM API key from your chosen provider (OpenAI, Anthropic, Azure OpenAI, AWS Bedrock, or GCP Vertex AI)"
    },
    {
      "order": 5,
      "text": "Mission 1: Design Your Architecture",
      "action": "Mission 1: Design Your Architecture",
      "url": null,
      "description": "Research and plan your cloud infrastructure:\n\n• How will you separate public and private resources?\n• What networking components do you need?\n• How will you secure communication between tiers?"
    },
    {
      "order": 5,
      "text": "Mission 2: Deploy the API Server",
      "action": "Mission 2: Deploy the API Server",
      "url": null,
      "description": "Set up your application server in the public tier:\n\n• Choose appropriate compute resources\n• Deploy your Journal API application\n• Configure secure access and networking"
    },
    {
      "order": 6,
      "text": "Mission 3: Deploy the Database Server",
      "action": "Mission 3: Deploy the Database Server",
      "url": null,
      "description": "Set up PostgreSQL in the private tier:\n\n• Ensure it's NOT directly accessible from the internet\n• Configure it to accept connections from your API server only\n• Implement proper security measures"
    },
    {
      "order": 7,
      "text": "Mission 4: Test Your Deployment",
      "action": "Mission 4: Test Your Deployment",
      "url": null,
      "description": "Validate your architecture:\n\n• All API endpoints work correctly\n• Database is properly secured\n• Data persists between restarts"
    },
    {
      "order": 8,
      "text": "Success Criteria",
      "action": "Success Criteria:",
      "url": null,
      "description": "Your deployment succeeds when you can demonstrate:\n\n✅ API accessible from the internet\n✅ Database only accessible from API server (not internet)\n✅ All CRUD operations work via API endpoints\n✅ AI analysis endpoint returns sentiment and summary\n✅ LLM API key stored securely (environment variable, not in code)\n✅ Data persists between server restarts\n✅ Security follows least privilege principles"
    },
    {
      "order": 9,
      "text": "Document Your Learning",
      "action": "Document Your Learning:",
      "url": null,
      "description": "Create a technical writeup covering:\n\n• Your architecture design and reasoning\n• Security decisions and trade-offs\n• Challenges encountered and solutions\n• Key learnings about cloud deployment\n\nShare your progress in the cloud phase Discord channel!"
    },
    {
      "order": 10,
      "text": "Remember",
      "action": "Remember:",
      "url": null,
      "description": "This is about understanding cloud patterns, not following a recipe. Research, experiment, and learn from the journey. Every cloud provider has different tools - figure out what works best for your chosen platform."
    }
  ],
  "questions": [
    {
      "id": "phase4-topic9-q1",
      "prompt": "Walk me through the 2-tier architecture you deployed and explain why the database belongs in a private subnet.",
      "scenario_seeds": [
        "In a technical interview, you're asked to whiteboard the cloud architecture for your journal application and explain your design decisions.",
        "A security review questions why you chose to separate the API and database into different network tiers - justify your architecture.",
        "A junior engineer asks why you didn't just put everything in one subnet to simplify the deployment."
      ],
      "grading_rubric": "Must describe the 2-tier separation (public API, private database) AND explain why the database should not be internet-accessible AND address how the tiers communicate securely.",
      "concepts": {
        "required": [
          "public subnet for API",
          "private subnet for database",
          "no direct internet access to database"
        ],
        "expected": [
          "security through isolation",
          "API as only entry point",
          "reduced attack surface",
          "defense in depth"
        ],
        "bonus": [
          "network topology diagram",
          "availability zone considerations",
          "future scaling considerations"
        ]
      }
    },
    {
      "id": "phase4-topic9-q2",
      "prompt": "How did you configure security groups to allow API-to-database communication while keeping the database secure?",
      "scenario_seeds": [
        "A penetration tester asks you to explain the network security controls protecting your database.",
        "You're troubleshooting why your API can't connect to the database - walk through how security groups should be configured.",
        "During a security audit, you need to demonstrate that the database only accepts connections from authorized sources."
      ],
      "grading_rubric": "Must describe database security group allowing port 5432 only from API server AND explain how the source is restricted to API security group or IP AND address that internet access to the database is denied.",
      "concepts": {
        "required": [
          "database security group",
          "allow port 5432 from API only",
          "deny all internet access"
        ],
        "expected": [
          "source security group reference",
          "least privilege principle",
          "inbound rule specificity",
          "implicit deny"
        ],
        "bonus": [
          "security group chaining",
          "VPC flow logs for verification",
          "network ACLs as additional layer"
        ]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you help me design a secure 2-tier architecture for my journal app?",
    "Can you review my security group rules and check if they follow least privilege?",
    "Can you explain how to configure PostgreSQL to only accept connections from my API server?",
    "Can you help me troubleshoot why my API can't connect to the database?",
    "Can you quiz me on the differences between public and private subnets?",
    "Can you review my deployment and suggest security improvements?"
  ]
}
