{
  "id": "phase4-topic2",
  "slug": "security-iam",
  "name": "Security & Identity Management",
  "description": "This section focuses on identity and access management (IAM) to control permissions and protect cloud resources, as well as securing cloud instances using security groups and firewall rules.",
  "order": 2,
  "is_capstone": false,
  "learning_steps": [
    {
      "order": 1,
      "text": "Learn IAM concepts across cloud providers",
      "action": "Learn IAM concepts:",
      "url": null,
      "description": "Identity and Access Management (IAM) is how you control who can do what in your cloud environment. Master these core concepts: Users, Groups, Roles, and Policies.",
      "options": [
        {
          "provider": "aws",
          "title": "Getting Started with AWS IAM",
          "url": "https://docs.aws.amazon.com/IAM/latest/UserGuide/getting-started.html",
          "description": "Official AWS guide to IAM users, groups, policies, and roles"
        },
        {
          "provider": "azure",
          "title": "Azure Role-Based Access Control",
          "url": "https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal",
          "description": "Learn how to assign roles in Azure using the portal"
        },
        {
          "provider": "gcp",
          "title": "GCP IAM Overview",
          "url": "https://cloud.google.com/iam/docs/overview",
          "description": "Understanding Identity and Access Management in Google Cloud"
        }
      ]
    },
    {
      "order": 2,
      "text": "Understand Security Groups & Firewall Rules",
      "action": "Understand Security Groups & Firewall Rules:",
      "url": null,
      "description": "Security groups act as virtual firewalls for your cloud resources, controlling inbound and outbound traffic.",
      "options": [
        {
          "provider": "aws",
          "title": "AWS Security Groups",
          "url": "https://docs.aws.amazon.com/vpc/latest/userguide/vpc-security-groups.html",
          "description": "Official documentation for controlling inbound and outbound traffic"
        },
        {
          "provider": "azure",
          "title": "Azure Network Security Groups",
          "url": "https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview",
          "description": "Overview of Network Security Groups in Azure"
        },
        {
          "provider": "gcp",
          "title": "GCP Firewall Rules",
          "url": "https://cloud.google.com/firewall/docs/firewalls",
          "description": "Understanding firewall rules in Google Cloud"
        }
      ]
    },
    {
      "order": 3,
      "text": "Key Security Principles",
      "action": "Key Security Principles:",
      "url": null,
      "description": "• Least Privilege Principle - Grant only the minimum permissions needed\n• RBAC (Role-Based Access Control) - Assign permissions based on job roles\n• Stateful vs Stateless rules - Security groups are stateful, network ACLs are stateless\n• Inbound vs Outbound rules - Control traffic in both directions"
    },
    {
      "order": 5,
      "text": "Hands-on Tasks",
      "action": "Hands-on Tasks:",
      "url": null,
      "description": "Complete these security exercises on your cloud platform:\n\n1. Create IAM users and groups with specific permissions\n2. Implement IAM roles for secure access management\n3. Define and apply IAM policies to restrict access to sensitive resources\n4. Create a security group for a VM instance\n5. Define inbound rules to allow specific traffic (e.g., HTTP, SSH, RDP)\n6. Define outbound rules to control external communication\n7. Apply security group rules to a VM and verify access restrictions\n8. Test traffic flow by attempting to connect from allowed and restricted IPs"
    }
  ],
  "questions": [
    {
      "id": "phase4-topic2-q1",
      "prompt": "How would you explain the principle of least privilege to a new team member, and why is it critical for cloud security?",
      "scenario_seeds": [
        "A developer requests admin access to production because 'it's easier' - you need to explain why that's problematic and propose an alternative.",
        "After a security audit, your team is asked to review all IAM policies - explain the principle guiding your review.",
        "A new hire accidentally deleted a production database because their role had permissions they didn't need for their job."
      ],
      "grading_rubric": "Must define least privilege as granting only necessary permissions AND explain the security risks of over-permissioning AND describe how to implement it with roles/policies.",
      "concepts": {
        "required": [
          "minimum permissions",
          "only what's necessary",
          "reduce attack surface"
        ],
        "expected": [
          "limit blast radius",
          "roles and policies",
          "regular access reviews",
          "compromise containment"
        ],
        "bonus": [
          "just-in-time access",
          "permission boundaries",
          "access logging and monitoring"
        ]
      }
    },
    {
      "id": "phase4-topic2-q2",
      "prompt": "Walk me through the difference between a security group and a network ACL and when you'd use each.",
      "scenario_seeds": [
        "Your security team wants to block all traffic from a known malicious IP range at the subnet level before it reaches any instances.",
        "A developer is confused why their security group rule allowing inbound traffic automatically allows the response back out.",
        "You're designing network security for a multi-tier application and need to decide where to enforce traffic rules."
      ],
      "grading_rubric": "Must explain security groups are stateful and instance-level AND network ACLs are stateless and subnet-level AND describe appropriate use cases for each.",
      "concepts": {
        "required": [
          "security group stateful",
          "network ACL stateless",
          "instance vs subnet level"
        ],
        "expected": [
          "return traffic automatic",
          "allow and deny rules",
          "rule evaluation order",
          "defense in depth"
        ],
        "bonus": [
          "ephemeral ports for NACLs",
          "default deny vs default allow",
          "layered security strategy"
        ]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you quiz me on the difference between IAM Users, Groups, and Roles?",
    "Can you explain how RBAC differs from ABAC in cloud identity management?",
    "Can you ask me how IAM policies control access to cloud resources?",
    "Can you quiz me on steps to enforce the Least Privilege Principle in IAM?",
    "Can you explain the difference between inbound and outbound rules?",
    "Can you quiz me on the difference between security groups and traditional firewalls?",
    "Can you ask me how security groups differ from network ACLs?",
    "Can you explain stateful vs. stateless rules in cloud security?"
  ]
}
