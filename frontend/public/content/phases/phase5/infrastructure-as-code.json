{
  "id": "phase5-topic3",
  "slug": "infrastructure-as-code",
  "name": "Infrastructure as Code (IaC)",
  "description": "Infrastructure as Code (IaC) is a key DevOps practice that allows you to manage and provision infrastructure using code, rather than manual processes like using the console. It ensures consistency, repeatability, and scalability in managing cloud resources.",
  "order": 3,
  "is_capstone": false,
  "learning_steps": [
    {
      "order": 1,
      "text": "What is Infrastructure as Code?",
      "action": "Understand:",
      "title": "What is Infrastructure as Code?",
      "url": "https://www.hashicorp.com/resources/what-is-infrastructure-as-code",
      "description": "Learn the fundamentals of IaC and why it's essential for modern cloud infrastructure."
    },
    {
      "order": 2,
      "text": "Why Terraform?",
      "action": "Why Terraform:",
      "title": "Introduction to Terraform",
      "url": "https://developer.hashicorp.com/terraform/intro",
      "description": "Terraform is cloud-agnostic (works with any provider), widely adopted, and has excellent documentation. We recommend starting here."
    },
    {
      "order": 3,
      "text": "Learn Terraform Basics",
      "action": "Learn Terraform Basics:",
      "url": null,
      "description": "Master these essential Terraform commands:",
      "secondary_links": [
        {
          "text": "terraform init",
          "url": "https://developer.hashicorp.com/terraform/cli/commands/init"
        },
        {
          "text": "terraform plan",
          "url": "https://developer.hashicorp.com/terraform/cli/commands/plan"
        },
        {
          "text": "terraform apply",
          "url": "https://developer.hashicorp.com/terraform/cli/commands/apply"
        },
        {
          "text": "terraform destroy",
          "url": "https://developer.hashicorp.com/terraform/cli/commands/destroy"
        }
      ]
    },
    {
      "order": 4,
      "text": "Cloud-Specific Providers",
      "action": "Cloud-Specific Providers:",
      "url": null,
      "description": "Explore Terraform providers for your cloud platform:",
      "secondary_links": [
        {
          "text": "AWS Provider",
          "url": "https://registry.terraform.io/providers/hashicorp/aws/latest/docs"
        },
        {
          "text": "Azure Provider",
          "url": "https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs"
        },
        {
          "text": "GCP Provider",
          "url": "https://registry.terraform.io/providers/hashicorp/google/latest/docs"
        }
      ]
    },
    {
      "order": 6,
      "text": "Install Terraform",
      "action": "Install Terraform:",
      "title": "Install Terraform",
      "url": "https://developer.hashicorp.com/terraform/install",
      "description": "Download and install Terraform on your system."
    },
    {
      "order": 6,
      "text": "Basic IaC Project",
      "action": "Hands-on: Basic IaC Project",
      "url": null,
      "description": "1. Write a Terraform configuration file to:\n   • Create a virtual machine in your preferred cloud platform\n   • Configure a security group to allow SSH access\n   • (Or deploy a static site)\n2. Run `terraform init` to set up the working directory\n3. Run `terraform plan` to preview changes\n4. Run `terraform apply` to create the resources\n5. Verify the resources in your cloud platform\n6. Run `terraform destroy` to clean up"
    },
    {
      "order": 7,
      "text": "Sample Terraform Configuration",
      "action": "Sample Terraform Configuration:",
      "url": null,
      "description": "Basic AWS EC2 instance with Terraform:",
      "code": "terraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = \"us-east-1\"\n}\n\nresource \"aws_instance\" \"app_server\" {\n  ami           = \"ami-0c55b159cbfafe1f0\"\n  instance_type = \"t2.micro\"\n\n  tags = {\n    Name = \"JournalAppServer\"\n  }\n}"
    },
    {
      "order": 8,
      "text": "Video Tutorials",
      "action": "Video Tutorials:",
      "url": null,
      "description": "Watch these cloud-specific Terraform tutorials:",
      "secondary_links": [
        {
          "text": "AWS Terraform Example",
          "url": "https://youtu.be/P4A62b1dkJE"
        },
        {
          "text": "Azure Terraform Example",
          "url": "https://youtu.be/HdMB2YCtVr4"
        },
        {
          "text": "GCP Terraform Example",
          "url": "https://youtu.be/VCayKl82Lt8"
        }
      ]
    },
    {
      "order": 9,
      "text": "Advanced Challenge with Copilot",
      "action": "Advanced Challenge (Optional):",
      "url": null,
      "description": "Use GitHub Copilot to design a modular Terraform configuration for a multi-tier application:\n\n1. Organize infrastructure into reusable modules:\n   • VPC — public and private subnets, routing\n   • Web server tier — compute, load balancing\n   • Database tier — managed database, backup configuration\n   • Security — security groups, IAM roles, encryption\n2. Use variables to parameterize your configuration\n3. Create module outputs for cross-module communication\n4. Implement backend state management\n5. Deploy and verify your resources"
    },
    {
      "order": 10,
      "text": "Resources",
      "action": "Additional Resources:",
      "url": null,
      "description": "Learn more about Terraform best practices:",
      "secondary_links": [
        {
          "text": "Terraform Documentation",
          "url": "https://developer.hashicorp.com/terraform/docs"
        },
        {
          "text": "Terraform Best Practices",
          "url": "https://www.terraform-best-practices.com/"
        }
      ]
    }
  ],
  "questions": [
    {
      "id": "phase5-topic3-q1",
      "prompt": "Walk me through what the Terraform state file is and why it's critical for infrastructure management.",
      "scenario_seeds": [
        "A teammate accidentally deleted the terraform.tfstate file and is panicking - explain what was lost and how to recover",
        "Your team is growing from 2 to 10 engineers and everyone needs to run Terraform - explain why you need remote state and state locking",
        "During an incident, you discover resources in AWS that don't match your Terraform config - explain how state drift happens and how to detect it"
      ],
      "grading_rubric": "Must explain what the state file contains AND why it's the source of truth for Terraform AND address team collaboration concerns (remote backend, locking).",
      "concepts": {
        "required": [
          "state file tracks resources",
          "maps config to real resources",
          "source of truth",
          "terraform.tfstate"
        ],
        "expected": [
          "remote backend",
          "state locking",
          "drift detection",
          "sensitive data in state"
        ],
        "bonus": [
          "state migration",
          "terraform import",
          "state file encryption",
          "workspaces",
          "partial state recovery"
        ]
      }
    },
    {
      "id": "phase5-topic3-q2",
      "prompt": "How would you explain the difference between terraform plan and terraform apply to a new team member?",
      "scenario_seeds": [
        "A new DevOps engineer is about to run their first Terraform command against production - walk them through the safe workflow",
        "Your team's Terraform apply failed halfway through and now infrastructure is in an inconsistent state - explain how plan would have helped and what to do next",
        "During a PR review, someone asks why you require terraform plan output in every infrastructure change PR - explain the value"
      ],
      "grading_rubric": "Must explain plan as a preview/dry-run AND apply as execution AND emphasize the safety workflow of always planning before applying.",
      "concepts": {
        "required": [
          "plan previews changes",
          "apply executes changes",
          "dry run",
          "create/modify/destroy"
        ],
        "expected": [
          "plan output review",
          "-auto-approve flag dangers",
          "confirmation prompt",
          "plan file"
        ],
        "bonus": [
          "saved plan files",
          "CI/CD plan artifacts",
          "speculative plans",
          "cost estimation in plan"
        ]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you quiz me on the benefits of using Infrastructure as Code?",
    "Can you explain how Terraform ensures idempotency in resource management?",
    "Can you ask me about the purpose of the terraform state file?",
    "Can you quiz me on how to manage sensitive data like API keys in Terraform?",
    "Can you explain the difference between `terraform plan` and `terraform apply`?",
    "Can you ask me about Terraform modules and why/how I should use them?",
    "Can you quiz me on Terraform best practices?",
    "Can you explain the benefits of using AI assistants to generate IaC templates?",
    "Can you ask me how to ensure quality and security when using AI-generated IaC?"
  ]
}
