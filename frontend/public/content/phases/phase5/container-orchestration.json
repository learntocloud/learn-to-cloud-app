{
  "id": "phase5-topic4",
  "slug": "container-orchestration",
  "name": "Container Orchestration - Kubernetes",
  "description": "As applications grow in complexity, managing containers manually becomes challenging. Kubernetes (K8s) is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications. It's widely used in modern cloud-native environments to ensure applications are highly available, scalable, and resilient.",
  "order": 4,
  "estimated_time": "4-5 days",
  "is_capstone": false,
  "learning_steps": [
    {
      "order": 1,
      "text": "Why Kubernetes?",
      "action": "Why Kubernetes?:",
      "url": null,
      "description": "Kubernetes provides:\n\n\u2022 Automated Deployment and Scaling - Automatically deploy and scale containers based on resource usage\n\u2022 Self-Healing - Restarts failed containers, replaces unresponsive ones\n\u2022 Load Balancing - Distributes traffic across containers for high availability\n\u2022 Service Discovery - Automatically assigns DNS names and IPs to services\n\u2022 Declarative Configuration - Uses YAML manifests to define desired state"
    },
    {
      "order": 2,
      "text": "Core Concepts",
      "action": "Core Concepts:",
      "url": null,
      "description": "Understanding Kubernetes requires familiarity with these components:\n\n\u2022 Cluster - Master node (manages cluster) + Worker nodes (run apps)\n\u2022 Pods - Smallest deployable unit, can contain one or more containers\n\u2022 Services - Expose your application (ClusterIP, NodePort, LoadBalancer)\n\u2022 Deployments - Manage desired state, handle rolling updates and scaling\n\u2022 ConfigMaps/Secrets - Store configuration and sensitive data"
    },
    {
      "order": 3,
      "text": "Local Setup",
      "action": "Local Setup:",
      "url": null,
      "description": "For local development, use one of these tools:",
      "secondary_links": [
        {
          "text": "Minikube",
          "url": "https://minikube.sigs.k8s.io/docs/"
        },
        {
          "text": "Kind (Kubernetes in Docker)",
          "url": "https://kind.sigs.k8s.io/"
        }
      ]
    },
    {
      "order": 4,
      "text": "Managed Kubernetes Services",
      "action": "Managed Kubernetes Services:",
      "url": null,
      "description": "Most cloud providers offer managed Kubernetes:",
      "secondary_links": [
        {
          "text": "AWS EKS",
          "url": "https://aws.amazon.com/eks/"
        },
        {
          "text": "Azure AKS",
          "url": "https://learn.microsoft.com/en-us/azure/aks/"
        },
        {
          "text": "Google GKE",
          "url": "https://cloud.google.com/kubernetes-engine/docs/concepts/kubernetes-engine-overview"
        }
      ]
    },
    {
      "order": 5,
      "text": "AKS with Terraform",
      "action": "Watch:",
      "title": "Minimal K8s Cluster on Azure AKS using Terraform",
      "url": "https://youtu.be/J_aInEIBzE0",
      "description": "Quick example of setting up a Kubernetes cluster with Terraform and Azure."
    },
    {
      "order": 6,
      "text": "Basic Commands",
      "action": "Basic kubectl Commands:",
      "url": null,
      "description": "Essential Kubernetes commands:",
      "code": "# View cluster information\nkubectl cluster-info\n\n# List all nodes in the cluster\nkubectl get nodes\n\n# Deploy an application\nkubectl apply -f deployment.yaml\n\n# View running pods\nkubectl get pods\n\n# View logs of a pod\nkubectl logs <pod-name>\n\n# Delete a resource\nkubectl delete -f deployment.yaml"
    },
    {
      "order": 7,
      "text": "Hands-on Exercise",
      "action": "Hands-on Exercise:",
      "url": null,
      "description": "1. Install Minikube or Kind on your local machine\n2. Create a Kubernetes deployment using a YAML file\n3. Apply the deployment: `kubectl apply -f deployment.yaml`\n4. Verify pods are running: `kubectl get pods`\n5. Expose the deployment: `kubectl expose deployment nginx-deployment --type=NodePort --port=80`\n6. Access the application in your browser using the NodePort"
    },
    {
      "order": 8,
      "text": "Sample Deployment YAML",
      "action": "Sample Deployment YAML:",
      "url": null,
      "description": "Basic nginx deployment:",
      "code": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: nginx-deployment\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: nginx\n  template:\n    metadata:\n      labels:\n        app: nginx\n    spec:\n      containers:\n      - name: nginx\n        image: nginx:latest\n        ports:\n        - containerPort: 80"
    },
    {
      "order": 9,
      "text": "Additional Resources",
      "action": "Additional Resources:",
      "url": null,
      "description": "Deep dive into Kubernetes:",
      "secondary_links": [
        {
          "text": "Kubernetes Official Documentation",
          "url": "https://kubernetes.io/docs/concepts/"
        },
        {
          "text": "Kubernetes the Hard Way",
          "url": "https://github.com/kelseyhightower/kubernetes-the-hard-way"
        }
      ]
    }
  ],
  "questions": [
    {
      "id": "phase5-topic4-q1",
      "prompt": "How would you explain a Kubernetes Pod to someone coming from a Docker-only background?",
      "scenario_seeds": [
        "A developer who's only used docker-compose asks why they can't just run containers directly in Kubernetes - explain the Pod abstraction",
        "Your team is designing a sidecar logging pattern and a developer asks why the app and log shipper need to be in the same Pod",
        "During a debugging session, a junior engineer is confused why killing one container in a Pod affected another container - explain Pod lifecycle"
      ],
      "grading_rubric": "Must explain Pod as the smallest deployable unit AND describe shared resources (network, storage) AND contrast with running standalone containers.",
      "concepts": {
        "required": ["smallest deployable unit", "one or more containers", "shared network namespace", "shared storage volumes"],
        "expected": ["localhost communication", "co-scheduled", "Pod lifecycle", "ephemeral by design"],
        "bonus": ["init containers", "sidecar pattern", "Pod disruption budgets", "multi-container patterns"]
      }
    },
    {
      "id": "phase5-topic4-q2",
      "prompt": "Walk me through Kubernetes Services and the different types you'd use for various scenarios.",
      "scenario_seeds": [
        "Your microservices need to communicate with each other inside the cluster, and you also need to expose the API gateway externally - explain which Service types to use",
        "A developer deployed their app but can't access it from their browser - walk through the Service types and which one enables external access",
        "Your team is debating whether to use NodePort or LoadBalancer for a production API - explain the tradeoffs"
      ],
      "grading_rubric": "Must explain what Services provide (stable networking for Pods) AND describe ClusterIP, NodePort, and LoadBalancer types AND provide appropriate use cases for each.",
      "concepts": {
        "required": ["stable endpoint for Pods", "ClusterIP internal", "NodePort external via node", "LoadBalancer cloud integration"],
        "expected": ["service discovery via DNS", "label selectors", "load balancing across Pods", "port mapping"],
        "bonus": ["ExternalName", "headless services", "Ingress controllers", "service mesh"]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you quiz me on what Kubernetes is and why it's used in modern development?",
    "Can you explain the key components of a Kubernetes cluster?",
    "Can you ask me what a pod is and how it differs from a container?",
    "Can you quiz me on how Kubernetes services enable communication between pods?",
    "Can you explain the purpose of a Deployment in Kubernetes?",
    "Can you ask me how Kubernetes handles self-healing?",
    "Can you quiz me on ConfigMaps and Secrets in Kubernetes?",
    "Can you explain the difference between `kubectl apply` and `kubectl create`?",
    "Can you ask me how to scale a deployment in Kubernetes?",
    "Can you quiz me on the benefits of managed Kubernetes services (EKS, AKS, GKE)?"
  ],
  "learning_objectives": [
    {
      "id": "phase5-topic4-check1",
      "text": "How to install Minikube or Kind for local Kubernetes",
      "order": 1
    },
    {
      "id": "phase5-topic4-check2",
      "text": "How to create and deploy Kubernetes deployments",
      "order": 2
    },
    {
      "id": "phase5-topic4-check3",
      "text": "How to expose deployments as services",
      "order": 3
    },
    {
      "id": "phase5-topic4-check4",
      "text": "How to use kubectl for cluster management",
      "order": 4
    },
    {
      "id": "phase5-topic4-check5",
      "text": "(Optional) Understand managed Kubernetes services",
      "order": 5
    }
  ]
}
