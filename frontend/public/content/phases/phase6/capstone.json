{
  "id": "phase5-capstone",
  "slug": "capstone",
  "name": "Capstone: Comprehensive Security Implementation",
  "description": "Apply everything you've learned to implement comprehensive cloud security for your Journal API. This capstone covers IAM, data protection, network security, monitoring, and incident response - creating a production-ready security posture.",
  "short_description": "Secure your Journal API with IAM policies, secrets management, network controls, and automated threat detection.",
  "order": 7,
  "is_capstone": true,
  "learning_steps": [
    {
      "order": 1,
      "text": "Project Overview",
      "action": "Project Overview:",
      "url": null,
      "description": "Secure your Journal API across all five security domains: Identity & Access Management, Data Protection, Network Security, Security Monitoring, and Incident Response."
    },
    {
      "order": 2,
      "text": "Part 1: IAM Security",
      "action": "Part 1: IAM Security",
      "url": null,
      "description": "Implement proper identity and access controls:\n\n• Create service accounts with minimal permissions\n• Implement role-based access control (RBAC)\n• Enable MFA for all administrative access\n• Set up API authentication and authorization\n• Remove any hardcoded credentials"
    },
    {
      "order": 3,
      "text": "IAM Implementation Tasks",
      "action": "IAM Implementation Tasks:",
      "url": null,
      "description": "□ Create dedicated service account for API\n□ Define IAM roles with least privilege\n□ Configure API key rotation\n□ Set up conditional access policies\n□ Enable audit logging for IAM changes"
    },
    {
      "order": 4,
      "text": "Part 2: Data Protection",
      "action": "Part 2: Data Protection",
      "url": null,
      "description": "Protect data at rest and in transit:\n\n• Enable encryption for database storage\n• Configure TLS for all API endpoints\n• Implement secrets management for credentials\n• Set up backup encryption\n• Classify and protect sensitive user data"
    },
    {
      "order": 5,
      "text": "Data Protection Tasks",
      "action": "Data Protection Implementation Tasks:",
      "url": null,
      "description": "□ Enable database encryption at rest\n□ Configure HTTPS/TLS for API\n□ Migrate secrets to secrets manager\n□ Implement encrypted backups\n□ Document data classification schema"
    },
    {
      "order": 7,
      "text": "Part 3: Network Security",
      "action": "Part 3: Network Security",
      "url": null,
      "description": "Implement network isolation and controls:\n\n• Configure VPC with public/private subnets\n• Set up security groups for API and database\n• Implement network ACLs\n• Configure load balancer with WAF\n• Set up private endpoints where available"
    },
    {
      "order": 7,
      "text": "Network Security Tasks",
      "action": "Network Security Implementation Tasks:",
      "url": null,
      "description": "□ Design VPC architecture with subnets\n□ Configure security groups (API, DB, bastion)\n□ Set up network ACLs for subnet protection\n□ Configure load balancer with SSL termination\n□ Document network architecture diagram"
    },
    {
      "order": 8,
      "text": "Part 4: Security Monitoring",
      "action": "Part 4: Security Monitoring",
      "url": null,
      "description": "Set up comprehensive security monitoring:\n\n• Enable audit logging for all services\n• Configure log aggregation and analysis\n• Create security dashboards\n• Set up alerting for security events\n• Implement metrics for security KPIs"
    },
    {
      "order": 9,
      "text": "Security Monitoring Tasks",
      "action": "Security Monitoring Implementation Tasks:",
      "url": null,
      "description": "□ Enable CloudWatch/Azure Monitor logging\n□ Configure log retention policies\n□ Create security event dashboard\n□ Set up alerts for critical events\n□ Define security metrics and thresholds"
    },
    {
      "order": 10,
      "text": "Part 5: Incident Response",
      "action": "Part 5: Incident Response",
      "url": null,
      "description": "Prepare for security incidents:\n\n• Enable threat detection services\n• Create incident response runbooks\n• Set up automated response actions\n• Document escalation procedures\n• Plan for incident communication"
    },
    {
      "order": 11,
      "text": "Incident Response Tasks",
      "action": "Incident Response Implementation Tasks:",
      "url": null,
      "description": "□ Enable GuardDuty/Sentinel threat detection\n□ Create runbook for credential compromise\n□ Set up automated isolation for threats\n□ Document incident severity matrix\n□ Create communication templates"
    },
    {
      "order": 12,
      "text": "Success Criteria",
      "action": "Success Criteria:",
      "url": null,
      "description": "Your implementation should meet these benchmarks:\n\n✓ Zero secrets in code or environment variables\n✓ Network isolation between API and database\n✓ Encryption enabled everywhere (transit + rest)\n✓ Monitoring functional with active alerts\n✓ At least one automated response configured\n✓ Complete documentation of security posture\n✓ Cost under budget with monitoring alerts"
    },
    {
      "order": 13,
      "text": "Deliverables",
      "action": "Deliverables:",
      "url": null,
      "description": "Document and demonstrate:\n\n1. Security architecture diagram\n2. IAM roles and policies documentation\n3. Network architecture with security controls\n4. Monitoring dashboard screenshots\n5. Incident response runbook\n6. Security assessment report"
    },
    {
      "order": 14,
      "text": "Reference Documentation",
      "action": "Reference Documentation:",
      "url": null,
      "description": "Security frameworks and best practices:",
      "secondary_links": [
        {
          "text": "AWS Well-Architected Security Pillar",
          "url": "https://docs.aws.amazon.com/wellarchitected/latest/security-pillar/welcome.html"
        },
        {
          "text": "Azure Security Best Practices",
          "url": "https://learn.microsoft.com/en-us/azure/security/fundamentals/best-practices-and-patterns"
        },
        {
          "text": "Google Cloud Security Foundations",
          "url": "https://cloud.google.com/architecture/security-foundations"
        },
        {
          "text": "CIS Cloud Security Benchmarks",
          "url": "https://www.cisecurity.org/benchmark"
        }
      ]
    },
    {
      "order": 15,
      "text": "Provider-Specific Guides",
      "action": "Provider-Specific Implementation Guides:",
      "url": null,
      "description": "Step-by-step tutorials:",
      "secondary_links": [
        {
          "text": "AWS Security Workshop",
          "url": "https://catalog.workshops.aws/well-architected-security/"
        },
        {
          "text": "Azure Security Workshop",
          "url": "https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/secure/"
        },
        {
          "text": "GCP Security Workshop",
          "url": "https://cloud.google.com/architecture/security-foundations"
        }
      ]
    }
  ],
  "questions": [
    {
      "id": "phase5-capstone-q1",
      "prompt": "Walk me through the security architecture you implemented for your Journal API. What are the key security controls at each layer?",
      "scenario_seeds": [
        "A potential investor asks for a security overview of your Journal API before committing funding. Walk them through your defense-in-depth architecture, explaining the security controls at the network, application, and data layers.",
        "Your company is pursuing SOC 2 certification and the auditor wants to understand your security architecture. Describe the controls you've implemented across IAM, encryption, network security, and monitoring for your Journal API.",
        "A new security engineer is joining your team and needs to understand the Journal API's security posture. Create an architectural walkthrough covering how you protect against unauthorized access, data breaches, and detect security incidents."
      ],
      "grading_rubric": "Must describe security controls across all layers (IAM/identity, network/VPC, data/encryption, monitoring/logging) AND explain how they work together as defense-in-depth AND demonstrate understanding of least privilege and secrets management.",
      "concepts": {
        "required": [
          "IAM and least privilege",
          "network security and VPC",
          "encryption at rest and in transit",
          "security monitoring"
        ],
        "expected": [
          "security groups",
          "secrets management",
          "audit logging",
          "threat detection",
          "defense in depth"
        ],
        "bonus": [
          "zero trust principles",
          "automated compliance checks",
          "security as code",
          "incident response readiness",
          "cost-security tradeoffs"
        ]
      }
    },
    {
      "id": "phase5-capstone-q2",
      "prompt": "How would you respond to a potential credential compromise in your cloud environment?",
      "scenario_seeds": [
        "At 2 AM, GuardDuty alerts that the service account for your Journal API is making unusual API calls including attempts to list all S3 buckets and IAM users. Walk through your incident response, from initial detection to post-incident improvements.",
        "A developer reports their laptop was stolen from a coffee shop. They had AWS CLI configured with access keys that have permissions to your production Journal API infrastructure. Describe your response plan.",
        "Your SIEM correlates multiple signals: a successful login from an unusual location, followed by an IAM policy change that grants additional permissions, then data export API calls. How do you respond to this potential account takeover?"
      ],
      "grading_rubric": "Must follow incident response lifecycle (detect, investigate, contain, eradicate, recover) AND include specific actions (revoke credentials, assess blast radius, review audit logs) AND address both immediate response and preventive measures for the future.",
      "concepts": {
        "required": [
          "credential revocation",
          "blast radius assessment",
          "audit log review",
          "incident documentation"
        ],
        "expected": [
          "containment actions",
          "stakeholder notification",
          "root cause analysis",
          "preventive measures"
        ],
        "bonus": [
          "automated response playbooks",
          "forensic preservation",
          "threat hunting for lateral movement",
          "security posture improvements",
          "tabletop exercises"
        ]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you review my IAM implementation and suggest improvements?",
    "Can you quiz me on encryption best practices for my Journal API?",
    "Can you help me design the network security architecture?",
    "Can you review my security monitoring setup and alert configuration?",
    "Can you quiz me on incident response procedures?",
    "Can you help me create an incident response runbook?",
    "Can you assess whether my implementation meets the success criteria?",
    "Can you suggest ways to improve my security posture?"
  ]
}
