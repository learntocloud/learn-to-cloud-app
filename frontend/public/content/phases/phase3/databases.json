{
  "id": "phase3-topic4",
  "slug": "databases",
  "name": "Databases",
  "description": "We will be using a PostgreSQL database to store our application data. You'll learn SQL fundamentals, run PostgreSQL locally using Docker, and connect to it from Python.",
  "order": 4,
  "is_capstone": false,
  "learning_steps": [
    {
      "order": 1,
      "text": "Study SQL basics",
      "action": "Study SQL basics:",
      "title": "Intro to SQL",
      "url": "https://www.khanacademy.org/computing/computer-programming/sql",
      "description": "Learn the fundamentals of SQL with Khan Academy's interactive course. Focus on SELECT, INSERT, UPDATE, DELETE, and basic joins."
    },
    {
      "order": 3,
      "text": "Run PostgreSQL locally with Docker",
      "action": "Run PostgreSQL locally:",
      "title": "PostgreSQL in Docker",
      "url": "https://www.docker.com/blog/how-to-use-the-postgres-docker-official-image/",
      "description": "Learn how to run PostgreSQL in a Docker container. This is the easiest way to get a database running locally without installing PostgreSQL on your system."
    },
    {
      "order": 3,
      "text": "Connect to PostgreSQL from Python",
      "action": "Connect from Python:",
      "title": "SQLAlchemy Tutorial",
      "url": "https://docs.sqlalchemy.org/en/20/tutorial/index.html",
      "description": "Learn how to connect to PostgreSQL from Python using SQLAlchemy, the most popular Python ORM. This is the same library used in the capstone project."
    },
    {
      "order": 4,
      "text": "Practice with hands-on exercises",
      "action": "Hands-on practice:",
      "url": null,
      "description": "Try these exercises with your local PostgreSQL:\n\n1. Create a database and a table for storing notes\n2. Write Python code to insert, read, update, and delete notes\n3. Add a second table (e.g., categories) and practice joins\n4. Experiment with SQLAlchemy models and relationships"
    }
  ],
  "questions": [
    {
      "id": "phase3-topic4-q1",
      "prompt": "Walk me through CRUD operations and how they map to SQL commands.",
      "scenario_seeds": [
        "You're building a notes app and need to implement basic data operations. Map out the SQL for each action a user might take.",
        "A teammate asks why database operations are called CRUD. Walk them through each operation with a concrete example.",
        "You're reviewing an API and need to verify the database layer implements all necessary operations. Explain what to look for."
      ],
      "grading_rubric": "Must correctly map Create to INSERT, Read to SELECT, Update to UPDATE, Delete to DELETE AND explain what each operation does AND provide example use cases.",
      "concepts": {
        "required": [
          "CREATE/INSERT",
          "READ/SELECT",
          "UPDATE",
          "DELETE",
          "SQL commands"
        ],
        "expected": [
          "WHERE clause",
          "data manipulation",
          "primary keys",
          "affected rows"
        ],
        "bonus": [
          "transactions",
          "returning clauses",
          "upsert operations"
        ]
      }
    },
    {
      "id": "phase3-topic4-q2",
      "prompt": "How would you explain an ORM to a junior developer, and why would you use one instead of raw SQL?",
      "scenario_seeds": [
        "Your team is onboarding a new developer who only knows raw SQL. Explain why your codebase uses SQLAlchemy instead.",
        "A security audit flagged potential SQL injection in a legacy service using string concatenation. Explain how an ORM prevents this.",
        "You're deciding whether to use raw SQL or SQLAlchemy for a new microservice. Walk through the trade-offs."
      ],
      "grading_rubric": "Must explain ORM maps database tables to Python classes AND prevents SQL injection through parameterization AND improves productivity/maintainability.",
      "concepts": {
        "required": [
          "object-relational mapping",
          "models as classes",
          "SQL injection prevention"
        ],
        "expected": [
          "SQLAlchemy",
          "abstraction layer",
          "productivity",
          "maintainability"
        ],
        "bonus": [
          "query builder patterns",
          "migration support",
          "when raw SQL is still needed"
        ]
      }
    }
  ],
  "test_knowledge_prompts": [
    "Can you ask me to explain what a relational database is and how tables relate to each other?",
    "Can you quiz me on CRUD operations and their SQL equivalents?",
    "Can you ask me to explain how to run PostgreSQL in a Docker container?",
    "Can you ask me to explain how to connect to a database from a Python application?",
    "Can you quiz me on how to perform CRUD operations using SQLAlchemy?",
    "Can you ask me to explain what an ORM is and why we use SQLAlchemy?",
    "Can you ask me to explain the difference between raw SQL and using an ORM?",
    "Can you quiz me on database relationships and foreign keys?"
  ]
}
