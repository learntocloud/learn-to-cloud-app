[pytest]
testpaths = tests
asyncio_mode = auto
pythonpath = .
asyncio_default_fixture_loop_scope = session
asyncio_default_test_loop_scope = session

addopts =
    --strict-markers
    --strict-config
    --durations=10
    -ra
    -v

# Coverage is opt-in: run with --cov to enable (CI passes --cov via workflow)
# Example: uv run pytest --cov=. --cov-report=term-missing

markers =
    unit: unit tests (fast, no I/O)
    integration: integration tests (database required)
    slow: tests that take > 1s
    smoke: minimal smoke test subset
    skip_until_fixed: temporarily skipped tests tied to issues

# Coverage config is in pyproject.toml [tool.coverage.*]
# Run with coverage: uv run pytest --cov=. --cov-report=term-missing --cov-report=html:htmlcov --cov-report=xml:coverage.xml
